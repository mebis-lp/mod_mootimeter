define("mod_mootimeter/handle_button_clicked",["exports","core/ajax","core/log","core/modal_factory","core/modal_events","core/str","mod_mootimeter/reload_page"],(function(_exports,_ajax,_log,_modal_factory,_modal_events,_str,_reload_page){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_log=_interopRequireDefault(_log),_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events);_exports.init=async uniqueID=>{var obj=document.getElementById(uniqueID);if(!document.getElementById(uniqueID))return;obj.addEventListener("click",(function(){modal.show()}));var confirmationTitleStr,confirmationQuestionStr,confirmationType,dataset=obj.dataset;if(confirmationTitleStr=obj.getAttribute("data-confirmationtitlestr")?dataset.confirmationtitlestr:(0,_str.get_string)("delete","core"),confirmationQuestionStr=obj.getAttribute("data-confirmationquestionstr")?dataset.confirmationquestionstr:(0,_str.get_string)("areyousure"),obj.getAttribute("data-confirmationtype")){if("DELETE_CANCEL"===dataset.confirmationtype)confirmationType=_modal_factory.default.types.DELETE_CANCEL}else confirmationType=_modal_factory.default.types.DELETE_CANCEL;const modal=await _modal_factory.default.create({type:confirmationType,title:confirmationTitleStr,body:confirmationQuestionStr,pageid:5});modal.getRoot().on(_modal_events.default.delete,(function(){var pageid=obj.dataset.pageid,uniqueID=obj.id,ajaxmethode=obj.dataset.ajaxmethode;buttonClickedHandle(pageid,uniqueID,ajaxmethode)}))};const buttonClickedHandle=async(pageid,uniqueID,ajaxmethode)=>{var dataset=JSON.stringify(document.getElementById(uniqueID).dataset);const response=await((pageid,thisDataset,ajaxmethode)=>(0,_ajax.call)([{methodname:ajaxmethode,args:{pageid:pageid,thisDataset:thisDataset}}])[0])(pageid,dataset,ajaxmethode);if(200!=response.code&&_log.default.error(response.string),1==response.reload){const queryString=window.location.search,urlParams=new URLSearchParams(queryString);(0,_reload_page.execReloadPage)(urlParams.get("pageid"),urlParams.get("id"))}}}));

//# sourceMappingURL=handle_button_clicked.min.js.map