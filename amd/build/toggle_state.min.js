define("mod_mootimeter/toggle_state",["exports","core/ajax","core/log","mod_mootimeter/reload_page"],(function(_exports,_ajax,_log,_reload_page){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_log=(obj=_log)&&obj.__esModule?obj:{default:obj};_exports.init=ids=>{const containerid=ids[0];var obj=document.getElementById(containerid);document.getElementById(containerid)&&obj.addEventListener("click",(function(){var pageid=this.dataset.pageid,containerid=this.id,iconid=this.dataset.iconid;exectoggleState(pageid,containerid,iconid)}))};const exectoggleState=async(pageid,containerid,iconid)=>{var statename=document.getElementById(containerid).dataset.togglename;const response=await((pageid,statename)=>(0,_ajax.call)([{methodname:"mod_mootimeter_toggle_state",args:{pageid:pageid,statename:statename}}])[0])(pageid,statename);if(200!=response.code&&_log.default.error(response.string),200==response.code){var dataset=document.getElementById(containerid).dataset;document.getElementById(iconid).classList.remove(dataset.iconenabled),document.getElementById(iconid).classList.remove(dataset.icondisabled),1==response.newstate&&(document.getElementById(iconid).classList.add(dataset.iconenabled),document.getElementById(containerid).setAttribute("data-original-title",dataset.tooltipdisabled)),1!=response.newstate&&(document.getElementById(iconid).classList.add(dataset.icondisabled),document.getElementById(containerid).setAttribute("data-original-title",dataset.tooltipenabled)),document.getElementById("mootimeterstate").setAttribute("data-lastupdated",0);const queryString=window.location.search,cmid=new URLSearchParams(queryString).get("id");dataset.useUrlParams=1,(0,_reload_page.execReloadPage)(dataset.pageid,cmid,dataset)}}}));

//# sourceMappingURL=toggle_state.min.js.map