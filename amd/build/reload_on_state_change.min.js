define("mod_mootimeter/reload_on_state_change",["exports","core/ajax","core/log"],(function(_exports,_ajax,_log){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_log=(obj=_log)&&obj.__esModule?obj:{default:obj};_exports.init=statename=>{var obj=document.getElementById("mootimeterstate");obj?obj.dataset.pageid?statename?setInterval((function(){getState(obj.dataset.pageid,statename)}),1e3):window.console.log("Statename not set in methods argument"):window.console.log("Pageid not set in mootimeterstate"):window.console.log("mootimeterstate not found")};const getState=async(pageid,statename)=>{const response=await((pageid,statename)=>(0,_ajax.call)([{methodname:"mod_mootimeter_get_state",args:{pageid:pageid,statename:statename}}])[0])(pageid,statename);200!=response.code&&_log.default.error(response.string),200==response.code&&(document.getElementById("mootimeterstate").dataset[statename]||document.getElementById("mootimeterstate").setAttribute("data-"+statename,response.state),document.getElementById("mootimeterstate").dataset[statename]!=response.state&&location.reload())}}));

//# sourceMappingURL=reload_on_state_change.min.js.map