define("mod_mootimeter/reload_page_content",["exports","core/ajax","core/log","core/notification","core/templates","mod_mootimeter/reload_pagelist","mod_mootimeter/utils"],(function(_exports,_ajax,_log,_notification,_templates,_reload_pagelist,_utils){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_log=_interopRequireDefault(_log),_templates=_interopRequireDefault(_templates);_exports.init=uniqueID=>{const obj=document.getElementById(uniqueID);obj&&obj.addEventListener("change",(function(){var pageid=this.dataset.pageid;const queryString=window.location.search,cmid=new URLSearchParams(queryString).get("id");execReloadPage(pageid,cmid,this.dataset)}))};const execReloadPage=async(pageid,cmid,dataset)=>{dataset=dataset?JSON.stringify(dataset):JSON.stringify([]);const response=await((pageid,cmid,dataset)=>(0,_ajax.call)([{methodname:"mod_mootimeter_get_pagecontentparams",args:{pageid:pageid,cmid:cmid,dataset:dataset}}])[0])(pageid,cmid,dataset);if(200!=response.code&&_log.default.error(response.string),200==response.code){var mtmstate=document.getElementById("mootimeterstate");const pageparmas=JSON.parse(response.pageparams);mtmstate.setAttribute("data-pageid",pageparmas.pageid),_templates.default.renderForPromise(pageparmas.pagecontent.template,pageparmas.pagecontent).then((_ref=>{let{html:html,js:js}=_ref;return _templates.default.replaceNodeContents("#mootimeter-pagecontent",html,js),!0})).catch((error=>(0,_notification.exception)(error))),(0,_utils.setGetParam)("pageid",pageparmas.pageid),(0,_reload_pagelist.execReloadPagelist)(pageid,cmid,!0),document.querySelectorAll(".tooltip").forEach((e=>e.remove()))}}}));

//# sourceMappingURL=reload_page_content.min.js.map