{"version":3,"file":"handler_input_number.min.js","sources":["../src/handler_input_number.js"],"sourcesContent":["import {call as fetchMany} from 'core/ajax';\nimport Log from 'core/log';\nimport {execReloadPage as reloadPage} from 'mod_mootimeter/reload_page';\n\nexport const init = (uniqueID) => {\n    var up = document.getElementById('up_' + uniqueID);\n    var down = document.getElementById('down_' + uniqueID);\n\n    if (up) {\n        up.addEventListener(\"click\", countUp);\n    }\n\n    if (down) {\n        down.addEventListener(\"click\", countDown);\n    }\n\n    /**\n     * Count num input up.\n     */\n    function countUp() {\n        var id = this.dataset.id;\n        if (Math.floor(document.getElementById(id).dataset.min) <= Math.floor(document.getElementById(id).value) + 1) {\n            document.getElementById(id).value = Math.floor(document.getElementById(id).value) + 1;\n            store(this, id);\n        }\n    }\n\n    /**\n     * Count num input down.\n     */\n    function countDown() {\n        var id = this.dataset.id;\n        if (Math.floor(document.getElementById(id).dataset.min) <= Math.floor(document.getElementById(id).value) - 1) {\n            document.getElementById(id).value = Math.floor(document.getElementById(id).value) - 1;\n            store(this, id);\n        }\n    }\n\n    /**\n     * Store the value.\n     * @param {*} obj\n     * @param {*} id\n     */\n    function store(obj, id) {\n        var pageid = obj.dataset.pageid;\n        var ajaxmethode = obj.dataset.ajaxmethode;\n        var inputname = obj.dataset.name;\n        var inputvalue = document.getElementById(id).value;\n        var thisDataset = JSON.stringify(obj.dataset);\n        setINState(ajaxmethode, pageid, inputname, inputvalue, thisDataset);\n    }\n};\n\n/**\n * Executes the call to store cb state.\n * @param {string} ajaxmethode\n * @param {int} pageid\n * @param {string} inputname\n * @param {string} inputvalue\n * @param {string} thisDataset\n * @returns {mixed}\n */\nconst execSetINState = (\n    ajaxmethode,\n    pageid,\n    inputname,\n    inputvalue,\n    thisDataset\n) => fetchMany([{\n    methodname: ajaxmethode,\n    args: {\n        pageid,\n        inputname,\n        inputvalue,\n        thisDataset\n    },\n}])[0];\n\n/**\n * Store cb state.\n * @param {string} ajaxmethode\n * @param {int} pageid\n * @param {string} inputname\n * @param {string} inputvalue\n * @param {string} thisDataset\n */\nconst setINState = async(ajaxmethode, pageid, inputname, inputvalue, thisDataset) => {\n    const response = await execSetINState(ajaxmethode, pageid, inputname, inputvalue, thisDataset);\n    if (response.code != 200) {\n        Log.error(response.string);\n    }\n\n    if (response.code == 200) {\n        const queryString = window.location.search;\n        const urlParams = new URLSearchParams(queryString);\n        const cmid = urlParams.get('id');\n        reloadPage(pageid, cmid, thisDataset);\n    }\n};"],"names":["uniqueID","up","document","getElementById","down","store","obj","id","pageid","dataset","ajaxmethode","inputname","name","inputvalue","value","thisDataset","JSON","stringify","setINState","addEventListener","this","Math","floor","min","async","response","methodname","args","execSetINState","code","error","string","queryString","window","location","search","cmid","URLSearchParams","get"],"mappings":"8SAIqBA,eACbC,GAAKC,SAASC,eAAe,MAAQH,UACrCI,KAAOF,SAASC,eAAe,QAAUH,mBAqCpCK,MAAMC,IAAKC,QACZC,OAASF,IAAIG,QAAQD,OACrBE,YAAcJ,IAAIG,QAAQC,YAC1BC,UAAYL,IAAIG,QAAQG,KACxBC,WAAaX,SAASC,eAAeI,IAAIO,MACzCC,YAAcC,KAAKC,UAAUX,IAAIG,SACrCS,WAAWR,YAAaF,OAAQG,UAAWE,WAAYE,aAzCvDd,IACAA,GAAGkB,iBAAiB,wBAWhBZ,GAAKa,KAAKX,QAAQF,GAClBc,KAAKC,MAAMpB,SAASC,eAAeI,IAAIE,QAAQc,MAAQF,KAAKC,MAAMpB,SAASC,eAAeI,IAAIO,OAAS,IACvGZ,SAASC,eAAeI,IAAIO,MAAQO,KAAKC,MAAMpB,SAASC,eAAeI,IAAIO,OAAS,EACpFT,MAAMe,KAAMb,QAXhBH,MACAA,KAAKe,iBAAiB,wBAkBlBZ,GAAKa,KAAKX,QAAQF,GAClBc,KAAKC,MAAMpB,SAASC,eAAeI,IAAIE,QAAQc,MAAQF,KAAKC,MAAMpB,SAASC,eAAeI,IAAIO,OAAS,IACvGZ,SAASC,eAAeI,IAAIO,MAAQO,KAAKC,MAAMpB,SAASC,eAAeI,IAAIO,OAAS,EACpFT,MAAMe,KAAMb,eAoDlBW,WAAaM,MAAMd,YAAaF,OAAQG,UAAWE,WAAYE,qBAC3DU,cAzBa,EACnBf,YACAF,OACAG,UACAE,WACAE,eACC,cAAU,CAAC,CACZW,WAAYhB,YACZiB,KAAM,CACFnB,OAAAA,OACAG,UAAAA,UACAE,WAAAA,WACAE,YAAAA,gBAEJ,GAWuBa,CAAelB,YAAaF,OAAQG,UAAWE,WAAYE,gBAC7D,KAAjBU,SAASI,mBACLC,MAAML,SAASM,QAGF,KAAjBN,SAASI,KAAa,OAChBG,YAAcC,OAAOC,SAASC,OAE9BC,KADY,IAAIC,gBAAgBL,aACfM,IAAI,sCAChB9B,OAAQ4B,KAAMrB"}