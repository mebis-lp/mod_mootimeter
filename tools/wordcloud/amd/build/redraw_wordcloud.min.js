define("mootimetertool_wordcloud/redraw_wordcloud",["exports","core/ajax","mootimetertool_wordcloud/wordcloud2"],(function(_exports,_ajax,_wordcloud){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_wordcloud=(obj=_wordcloud)&&obj.__esModule?obj:{default:obj};_exports.init=id=>{document.getElementById(id)&&(getAnswers(id),setTimeout((()=>{const intervalms=document.getElementById("mootimeterstate").dataset.refreshinterval,interval=setInterval((()=>{document.getElementById(id)?getAnswers(id):clearInterval(interval)}),intervalms)}),5e3))};const getAnswers=async id=>{if(!document.getElementById(id))return;var pageid=document.getElementById(id).dataset.pageid;const mtmstate=document.getElementById("mootimeterstate");if(mtmstate.dataset.lastupdated==mtmstate.dataset.contentchangedat)return;var lastposttimestamp=0;document.getElementById("mootimeterstate").dataset.lastupdated&&(lastposttimestamp=document.getElementById("mootimeterstate").dataset.lastupdated);const response=await((pageid,lastupdated)=>(0,_ajax.call)([{methodname:"mootimetertool_wordcloud_get_answers",args:{pageid:pageid,lastupdated:lastupdated}}])[0])(pageid,lastposttimestamp);document.getElementById("mootimeterstate").setAttribute("data-lastupdated",response.lastupdated),document.getElementById(id).setAttribute("data-answers",JSON.stringify(response.answerlist)),function(id){let mtmtcanvas=document.getElementById(id),answers=JSON.parse(mtmtcanvas.dataset.answers);(0,_wordcloud.default)(mtmtcanvas,{list:answers,weightFactor:24,color:"#f98012",fontFamily:"OpenSans"})}(id)}}));

//# sourceMappingURL=redraw_wordcloud.min.js.map