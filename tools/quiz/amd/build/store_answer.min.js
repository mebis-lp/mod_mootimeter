define("mootimetertool_quiz/store_answer",["exports","core/ajax","core/notification","core/str","core/templates"],(function(_exports,_ajax,_notification,_str,_templates){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};_exports.init=uniqId=>{const submitbtn=document.getElementById(uniqId);submitbtn&&submitbtn.addEventListener("click",(function(){const selectedanswerids=[],pageid=this.dataset.pageid,checkboxes=document.getElementsByName("multipleanswers[]");for(const checkbox of checkboxes)checkbox.checked&&selectedanswerids.push(checkbox.value);return storeAnswer(pageid,selectedanswerids)}))};const storeAnswer=async(pageid,selectedanswerids)=>{var infobox;(infobox=document.getElementById("mtmt_answer_warning"))&&infobox.remove(),selectedanswerids=JSON.stringify(selectedanswerids);const successString=await(0,_str.get_string)("notification_success_store_answer","mod_mootimeter"),response=await((pageid,aoids)=>(0,_ajax.call)([{methodname:"mootimetertool_quiz_store_answer",args:{pageid:pageid,aoids:aoids}}])[0])(pageid,selectedanswerids);1e3!=response.code&&1001!=response.code&&1002!=response.code||renderInfoBox("warning",response.string,"fa-exclamation"),200==response.code&&renderInfoBox("success",successString,"")};function renderInfoBox(notificationType,notificationString,icon){const context={notification_id:"mtmt_answer_warning",notification_type:notificationType,notification_icon:icon,notification_text:notificationString};_templates.default.renderForPromise("mod_mootimeter/elements/snippet_notification",context).then((_ref=>{let{html:html,js:js}=_ref;return _templates.default.appendNodeContents("#mtmt_tool-colct-header",html,js),!0})).catch((error=>(0,_notification.exception)(error)))}}));

//# sourceMappingURL=store_answer.min.js.map